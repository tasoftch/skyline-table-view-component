/*! skyline-table-view-component - 0.0.82 */
!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports["skyline-table-view-component"]=t():e["skyline-table-view-component"]=t()}("undefined"!=typeof self?self:this,function(){return function(e){function t(r){if(n[r])return n[r].exports;var o=n[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,t),o.l=!0,o.exports}var n={};return t.m=e,t.c=n,t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=2)}([function(e,t,n){"use strict";if(Object.defineProperty(t,"__esModule",{value:!0}),!window.jQuery)throw Error("jQuery needs to be installed");t.default=window.jQuery},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();t.Plugin=function(){function e(){r(this,e)}return o(e,[{key:"install",value:function(e,t){}},{key:"name",get:function(){return""}}]),e}()},function(e,t,n){"use strict";var r=n(3),o=n(8),i=n(9),a=n(10);!function(e){e||(e=window.Skyline={}),Object.assign(e,{TableView:r.TableView,StaticTableViewDataSource:o.StaticTableViewDataSource,RemoteAPIDataSource:a.RemoteAPIDataSource,InlineTableRenderPlugin:i.InlineTableRenderPlugin})}(window.Skyline)},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.TableView=void 0;var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),c=n(4),f=n(6),l=n(0),s=function(e){return e&&e.__esModule?e:{default:e}}(l),p={show_all:!1,did_reload:!1};t.TableView=function(e){function t(e,n,i){r(this,t);var a=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,new f.TableViewEvents));return a.el=n,a.options=Object.assign({},p,i),a.tbody=(0,s.default)(n).find("tbody"),a.row_cache=[],a}return i(t,e),u(t,[{key:"dataSource",get:function(){return this.plugins.get("data_source")}}]),u(t,[{key:"noteRowsDidChange",value:function(e){var t=this;if("object"===(void 0===e?"undefined":a(e))){var n=function(e,n,r){var o=t.row_cache[e];if("del"===n)return void(r?(o.fadeOut(),setTimeout(function(){o.remove(),t.row_cache.splice(e,1)},500)):(o.remove(),t.row_cache.splice(e,1)));"add"!==n&&"ins"!==n||(o=(0,s.default)("<tr>")),"cha"===n&&o.html("");var i={},a={};if(t.trigger("fetchrow",{index:e,data:i,meta:a}),t.trigger("renderrow",{index:e,row:o,data:i,meta:a}),"add"===n&&(t.row_cache[e]=o,r?(o.hide(),t.tbody.append(o),o.fadeIn()):t.tbody.append(o)),"ins"===n){var u=t.row_cache[e];t.row_cache.splice(e,0,o),r?(o.hide(),u.before(o),o.fadeIn()):u.before(o)}};if(void 0!==e.from&&void 0!==e.to)for(var r=e.from;r<e.to;r++)n(r,"add");else{if(!this.options.did_reload)return void this.reloadData();void 0!==e.inserted?e.inserted.forEach(function(t){return n(t,"ins",e.animated)}):void 0!==e.changed?e.changed.forEach(function(e){return n(e,"cha")}):void 0!==e.append?e.append.forEach(function(t){return n(t,"add",e.animated)}):void 0!==e.deleted?e.deleted.forEach(function(t){return n(t,"del",e.animated)}):e.forEach(function(e){return n(e,"cha")})}}}},{key:"reloadData",value:function(){if(!this.dataSource)throw new Error("No datasource specified");this.row_cache.forEach(function(e){return e.remove()}),this.row_cache=[],this.trigger("reload"),this.options.did_reload=!0}}]),t}(c.Context)},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.Context=void 0;var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(5);t.Context=function(e){function t(e,n){r(this,t);var i=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,n));return i.id=e,i.components=new Map,i.plugins=new Map,i}return i(t,e),a(t,[{key:"use",value:function(e,t){if(e.name&&this.plugins.has(e.name))throw new Error("Plugin "+e.name+" already in use");e.install(this,t||{}),this.plugins.set(e.name,e)}},{key:"register",value:function(e){if(this.components.has(e.name))throw new Error("Component "+e.name+" already registered");this.components.set(e.name,e),this.trigger("componentregister",e)}},{key:"destroy",value:function(){this.trigger("destroy")}}]),t}(u.Emitter)},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();t.Emitter=function(){function e(t){r(this,e),this.events=t instanceof e?t.events:t.handlers}return o(e,[{key:"on",value:function(e,t){var n=this;return("string"==typeof e?e.split(" "):e).forEach(function(e){if(!n.events[e])throw new Error("The event "+e+" does not exist");n.events[e].push(t)}),this}},{key:"trigger",value:function(e,t){if(!(e in this.events))throw new Error("The event "+e+" cannot be triggered");var n=!0,r=this;return this.events[e].forEach(function(e){"function"==typeof e&&(n=e.call(r,t)&&n)}),n}},{key:"trigger_val",value:function(e,t){if(!(e in this.events))throw new Error("The event "+e+" cannot be triggered");var n=void 0,r=this;return this.events[e].forEach(function(e){void 0===n&&"function"==typeof e&&(n=e.call(r,t))}),n}},{key:"bind",value:function(e){if(this.events[e])throw new Error("The event "+e+" is already bound");this.events[e]=[]}},{key:"exists",value:function(e){return Array.isArray(this.events[e])}}]),e}()},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.TableViewEvents=void 0;var a=n(7);t.TableViewEvents=function(e){function t(){return r(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,{reload:[],fetchrow:[],renderrow:[]}))}return i(t,e),t}(a.Events)},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};t.Events=function e(t){r(this,e),this.handlers=o({warn:[console.warn],error:[console.error],componentregister:[],destroy:[]},t)}},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.StaticTableViewDataSource=void 0;var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(1);t.StaticTableViewDataSource=function(e){function t(){return r(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),a(t,[{key:"addRow",value:function(e,t){return this.rows.push(e),this.tableview.noteRowsDidChange({animated:t,append:[this.rows.length-1]}),this}},{key:"insertRow",value:function(e,t,n){return this.rows.splice(t,0,e),this.tableview.noteRowsDidChange({animated:n,inserted:[t]}),this}},{key:"replaceRow",value:function(e,t){return t<this.rows.length&&(this.rows[t]=e,this.tableview.noteRowsDidChange({changed:[t]})),this}},{key:"deleteRow",value:function(e,t){return e<this.rows.length&&(this.rows.splice(e,1),this.tableview.noteRowsDidChange({animated:t,deleted:[e]})),this}},{key:"install",value:function(e,t){var n=this;this.tableview=e,this.rows=[],e.on("reload",function(){n.tableview.noteRowsDidChange({from:0,to:n.rows.length})}),e.on("fetchrow",function(e){var t=e.index,r=e.data;e.meta.template="main",Object.assign(r,n.rows[t])})}},{key:"name",get:function(){return"data_source"}}]),t}(u.Plugin)},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.InlineTableRenderPlugin=void 0;var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(1),c=n(0),f=function(e){return e&&e.__esModule?e:{default:e}}(c);t.InlineTableRenderPlugin=function(e){function t(){return r(this,t),o(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return i(t,e),a(t,[{key:"install",value:function(e,t){var n=this;this.tableView=e,this.templates=new Map;var r=this;(0,f.default)(e.el).find("tr.template").each(function(){var e=(0,f.default)(this).attr("data-tpl");if(e||(e="@default"),r.default_template&&"@default"!==e||(r.default_template=e),r.templates.has(e))throw new Error("Template "+e+" already exists");r.templates.set(e,(0,f.default)(this).html().trim())}).remove(),e.on("renderrow",function(e){var t=e.row,r=(e.index,e.data),o=e.meta,i=o.template;i&&n.templates.has(i)||(i=n.default_template),t.append(n.templates.get(i)),(0,f.default)(t).find("td[data-ref]").each(function(){var e=(0,f.default)(this).attr("data-ref");if(!e||e.length<1)throw new Error("No data-ref attribute provided");e=r[e];var t=(0,f.default)(this).attr("data-format");t&&Skyline&&Skyline.String&&(e=Skyline.String.format(t,e,(0,f.default)(this))),(0,f.default)(this).html(e)})})}},{key:"name",get:function(){return"cell-render"}}]),t}(u.Plugin)},function(e,t,n){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0}),t.RemoteAPIDataSource=void 0;var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),u=n(1),c=n(0),f=function(e){return e&&e.__esModule?e:{default:e}}(c);t.RemoteAPIDataSource=function(e){function t(e,n){r(this,t);var i=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return i.preflight_URL=e,i.data_url=n,i}return i(t,e),a(t,[{key:"name",get:function(){return"data_source"}}]),a(t,[{key:"install",value:function(e,t){var n=this;this.tableView=e,e.on("reload",function(){f.default.get(n.preflight_URL,function(e){alert(e)})})}}]),t}(u.Plugin)}])});